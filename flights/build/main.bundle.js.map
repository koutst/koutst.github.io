{"version":3,"sources":["webpack:///webpack/bootstrap 9672915adaa4f98bbc15","webpack:///./lib/map_visualization.js"],"names":["margin","top","left","right","down","height","width","zoom","d3","scaleExtent","on","zoomed","toRad","Math","PI","toDeg","cross","v0","v1","dot","i","sum","length","lonlat2xyz","coord","lon","lat","x","cos","y","sin","z","quaternion","w","w_len","sqrt","theta","acos","max","min","qi","qj","qk","qr","euler2quat","e","roll","pitch","yaw","sr","cr","sp","cp","sy","cy","quatMultiply","q1","q2","a","b","c","d","f","g","h","quat2euler","t","atan2","asin","eulerAngles","o0","drag","dragstart","dragged","dragend","gpos0","projection","invert","mouse","rotate","svg","insert","datum","type","coordinates","attr","path","gpos1","o1","selectAll","remove","select","append","rectSVG","gMap","rectGMap","geoOrthographic","translate","scale","rectZoom","data","style","call","event","transform","queue","defer","json","csv","await","ready","geoPath","intSpeed","error","countriesData","airportsData","flightData","countriesParsed","topojson","feature","objects","countries","features","enter","text","properties","NAME","CONTINENT","GDP_MD_EST","airports","airportsNameCoord","iata","iata_code","geometry","flights","orgAir","destAir","depTime","push","transition","plane","route","l","node","getTotalLength","duration","attrTween","translateAttr","p","getPointAtLength","po","timer","interval","minutes","hours","currFlight","Object","assign","parseInt","DEP_TIME","DESTCOORD","time","setInterval","pointRadius","name","clearInterval","speed"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC3DA,CAAC,YAAU;;AAGT,MAAIA,SAAS,EAAEC,KAAK,CAAP,EAAUC,MAAM,CAAhB,EAAmBC,OAAO,CAA1B,EAA6BC,MAAM,CAAnC,EAAb;AAAA,MACEC,SAAS,MAAML,OAAOC,GAAb,GAAmBD,OAAOI,IADrC;AAAA,MAEEE,QAAQ,OAAON,OAAOE,IAAd,GAAqBF,OAAOG,KAFtC;;AAIA,MAAII,OAAOC,GAAGD,IAAH,GACRE,WADQ,CACI,CAAC,CAAD,EAAI,CAAJ,CADJ,EAERC,EAFQ,CAEL,MAFK,EAEGC,MAFH,CAAX;AAGF;AACA;;AAEA,MAAIC,QAAQC,KAAKC,EAAL,GAAU,GAAtB;AACA,MAAIC,QAAQ,MAAMF,KAAKC,EAAvB;;AAGA;AACA,WAASE,KAAT,CAAeC,EAAf,EAAmBC,EAAnB,EAAuB;AACnB,WAAO,CAACD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAzB,EAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxD,EAA+DD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAvF,CAAP;AACH;;AAED;AACA,WAASC,GAAT,CAAaF,EAAb,EAAiBC,EAAjB,EAAqB;AACjB,SAAK,IAAIE,IAAI,CAAR,EAAWC,MAAM,CAAtB,EAAyBJ,GAAGK,MAAH,GAAYF,CAArC,EAAwC,EAAEA,CAA1C;AAA6CC,aAAOJ,GAAGG,CAAH,IAAQF,GAAGE,CAAH,CAAf;AAA7C,KACA,OAAOC,GAAP;AACH;;AAED;AACA;AACA;AACA,WAASE,UAAT,CAAqBC,KAArB,EAA4B;;AAE3B,QAAIC,MAAMD,MAAM,CAAN,IAAWZ,KAArB;AACA,QAAIc,MAAMF,MAAM,CAAN,IAAWZ,KAArB;;AAEA,QAAIe,IAAId,KAAKe,GAAL,CAASF,GAAT,IAAgBb,KAAKe,GAAL,CAASH,GAAT,CAAxB;;AAEA,QAAII,IAAIhB,KAAKe,GAAL,CAASF,GAAT,IAAgBb,KAAKiB,GAAL,CAASL,GAAT,CAAxB;;AAEA,QAAIM,IAAIlB,KAAKiB,GAAL,CAASJ,GAAT,CAAR;;AAEA,WAAO,CAACC,CAAD,EAAIE,CAAJ,EAAOE,CAAP,CAAP;AACA;;AAED;AACA;AACA;AACA,WAASC,UAAT,CAAoBf,EAApB,EAAwBC,EAAxB,EAA4B;;AAE3B,QAAID,MAAMC,EAAV,EAAc;;AAEV,UAAIe,IAAIjB,MAAMC,EAAN,EAAUC,EAAV,CAAR;AAAA,UAAwB;AACpBgB,cAAQrB,KAAKsB,IAAL,CAAUhB,IAAIc,CAAJ,EAAOA,CAAP,CAAV,CADZ,CAFU,CAGwB;;AAE/B,UAAIC,SAAS,CAAb,EACC;;AAED,UAAIE,QAAQ,KAAKvB,KAAKwB,IAAL,CAAUxB,KAAKyB,GAAL,CAAS,CAAC,CAAV,EAAazB,KAAK0B,GAAL,CAAS,CAAT,EAAYpB,IAAIF,EAAJ,EAAQC,EAAR,CAAZ,CAAb,CAAV,CAAjB;;AAEA,UAAIsB,KAAMP,EAAE,CAAF,IAAOpB,KAAKiB,GAAL,CAASM,KAAT,CAAP,GAAyBF,KAAnC;AACD,UAAKO,KAAM,CAAER,EAAE,CAAF,CAAF,GAASpB,KAAKiB,GAAL,CAASM,KAAT,CAAT,GAA2BF,KAAtC;AACC,UAAIQ,KAAMT,EAAE,CAAF,IAAMpB,KAAKiB,GAAL,CAASM,KAAT,CAAN,GAAwBF,KAAlC;AACD,UAAKS,KAAM9B,KAAKe,GAAL,CAASQ,KAAT,CAAX;;AAEF,aAAOA,SAAS,CAACO,EAAD,EAAKH,EAAL,EAASC,EAAT,EAAaC,EAAb,CAAhB;AACH;AACD;;AAED;AACA;AACA;AACA,WAASE,UAAT,CAAoBC,CAApB,EAAuB;;AAEtB,QAAG,CAACA,CAAJ,EAAO;;AAEJ,QAAIC,OAAO,KAAKD,EAAE,CAAF,CAAL,GAAYjC,KAAvB;AAAA,QACImC,QAAQ,KAAKF,EAAE,CAAF,CAAL,GAAYjC,KADxB;AAAA,QAEIoC,MAAM,KAAKH,EAAE,CAAF,CAAL,GAAYjC,KAFtB;AAAA,QAIIqC,KAAKpC,KAAKiB,GAAL,CAASgB,IAAT,CAJT;AAAA,QAKII,KAAKrC,KAAKe,GAAL,CAASkB,IAAT,CALT;AAAA,QAMIK,KAAKtC,KAAKiB,GAAL,CAASiB,KAAT,CANT;AAAA,QAOIK,KAAKvC,KAAKe,GAAL,CAASmB,KAAT,CAPT;AAAA,QAQIM,KAAKxC,KAAKiB,GAAL,CAASkB,GAAT,CART;AAAA,QASIM,KAAKzC,KAAKe,GAAL,CAASoB,GAAT,CATT;AAAA,QAWIR,KAAKS,KAAGG,EAAH,GAAME,EAAN,GAAWJ,KAAGC,EAAH,GAAME,EAX1B;AAAA,QAYIZ,KAAKS,KAAGC,EAAH,GAAMG,EAAN,GAAWL,KAAGG,EAAH,GAAMC,EAZ1B;AAAA,QAaIX,KAAKQ,KAAGE,EAAH,GAAMC,EAAN,GAAWJ,KAAGE,EAAH,GAAMG,EAb1B;AAAA,QAcIX,KAAKO,KAAGE,EAAH,GAAME,EAAN,GAAWL,KAAGE,EAAH,GAAME,EAd1B;;AAgBA,WAAO,CAACV,EAAD,EAAKH,EAAL,EAASC,EAAT,EAAaC,EAAb,CAAP;AACH;;AAED;AACA;AACA;AACA,WAASa,YAAT,CAAsBC,EAAtB,EAA0BC,EAA1B,EAA8B;AAC7B,QAAG,CAACD,EAAD,IAAO,CAACC,EAAX,EAAe;;AAEZ,QAAIC,IAAIF,GAAG,CAAH,CAAR;AAAA,QACIG,IAAIH,GAAG,CAAH,CADR;AAAA,QAEII,IAAIJ,GAAG,CAAH,CAFR;AAAA,QAGIK,IAAIL,GAAG,CAAH,CAHR;AAAA,QAIIX,IAAIY,GAAG,CAAH,CAJR;AAAA,QAKIK,IAAIL,GAAG,CAAH,CALR;AAAA,QAMIM,IAAIN,GAAG,CAAH,CANR;AAAA,QAOIO,IAAIP,GAAG,CAAH,CAPR;;AASA,WAAO,CACNC,IAAEb,CAAF,GAAMc,IAAEG,CAAR,GAAYF,IAAEG,CAAd,GAAkBF,IAAEG,CADd,EAENL,IAAEd,CAAF,GAAMa,IAAEI,CAAR,GAAYF,IAAEI,CAAd,GAAkBH,IAAEE,CAFd,EAGNL,IAAEK,CAAF,GAAMJ,IAAEK,CAAR,GAAYJ,IAAEf,CAAd,GAAkBgB,IAAEC,CAHd,EAINJ,IAAEM,CAAF,GAAML,IAAEI,CAAR,GAAYH,IAAEE,CAAd,GAAkBD,IAAEhB,CAJd,CAAP;AAMH;;AAED;AACA;AACA,WAASoB,UAAT,CAAoBC,CAApB,EAAsB;;AAErB,QAAG,CAACA,CAAJ,EAAO;;AAEP,WAAO,CAAErD,KAAKsD,KAAL,CAAW,KAAKD,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAX,EAA4C,IAAI,KAAKA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAhD,IAAmFnD,KAArF,EACJF,KAAKuD,IAAL,CAAUvD,KAAKyB,GAAL,CAAS,CAAC,CAAV,EAAazB,KAAK0B,GAAL,CAAS,CAAT,EAAY,KAAK2B,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAZ,CAAb,CAAV,IAAwEnD,KADpE,EAEJF,KAAKsD,KAAL,CAAW,KAAKD,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAX,EAA4C,IAAI,KAAKA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAhD,IAAmFnD,KAF/E,CAAP;AAIA;;AAED;;;;;;;;AAQA,WAASsD,WAAT,CAAqBpD,EAArB,EAAyBC,EAAzB,EAA6BoD,EAA7B,EAAiC;;AAEhC;;;;;;;AAOA,QAAIJ,IAAIX,aAAcX,WAAW0B,EAAX,CAAd,EAA8BtC,WAAWT,WAAWN,EAAX,CAAX,EAA2BM,WAAWL,EAAX,CAA3B,CAA9B,CAAR;AACA,WAAO+C,WAAWC,CAAX,CAAP;AACA;;AAGD;AACE,MAAIK,OAAO/D,GAAG+D,IAAH,GACI7D,EADJ,CACO,OADP,EACgB8D,SADhB,EAEI9D,EAFJ,CAEO,MAFP,EAEe+D,OAFf,EAGI/D,EAHJ,CAGO,KAHP,EAGcgE,OAHd,CAAX;;AAKA,MAAIC,KAAJ,EAAWL,EAAX;;AAEA,WAASE,SAAT,GAAoB;AACnBG,YAAQC,WAAWC,MAAX,CAAkBrE,GAAGsE,KAAH,CAAS,IAAT,CAAlB,CAAR;AACAR,SAAKM,WAAWG,MAAX,EAAL;;AAEC;AACDC,QAAIC,MAAJ,CAAW,MAAX,EACaC,KADb,CACmB,EAACC,MAAM,OAAP,EAAgBC,aAAaT,KAA7B,EADnB,EAEaU,IAFb,CAEkB,OAFlB,EAE2B,OAF3B,EAGaA,IAHb,CAGkB,GAHlB,EAGuBC,IAHvB;AAIA;;AAED,WAASb,OAAT,GAAkB;;AAEjB,QAAIc,QAAQX,WAAWC,MAAX,CAAkBrE,GAAGsE,KAAH,CAAS,IAAT,CAAlB,CAAZ;;AAEAR,SAAKM,WAAWG,MAAX,EAAL;;AAEA,QAAIS,KAAKnB,YAAYM,KAAZ,EAAmBY,KAAnB,EAA0BjB,EAA1B,CAAT;AACAM,eAAWG,MAAX,CAAkBS,EAAlB;;AAEAR,QAAIS,SAAJ,CAAc,QAAd,EACIP,KADJ,CACU,EAACC,MAAM,OAAP,EAAgBC,aAAaG,KAA7B,EADV;AAECP,QAAIS,SAAJ,CAAc,MAAd,EAAsBJ,IAAtB,CAA2B,GAA3B,EAAgCC,IAAhC;AAED;;AAED,WAASZ,OAAT,GAAkB;AACjBM,QAAIS,SAAJ,CAAc,QAAd,EAAwBC,MAAxB;AACA;AACH;;;AAGE,MAAIV,MAAMxE,GAAGmF,MAAH,CAAU,MAAV,EACGC,MADH,CACU,KADV,EAEGP,IAFH,CAEQ,QAFR,EAEkBhF,SAASL,OAAOC,GAAhB,GAAsBD,OAAOI,IAF/C,EAGGiF,IAHH,CAGQ,OAHR,EAGiB/E,QAAQN,OAAOE,IAAf,GAAsBF,OAAOG,KAH9C,CAAV;;AAMA,MAAI0F,UAAUb,IAAIY,MAAJ,CAAW,SAAX,EACKP,IADL,CACU,OADV,EACmB,UADnB,EAEKA,IAFL,CAEU,QAFV,EAEoBhF,SAASL,OAAOC,GAAhB,GAAsBD,OAAOI,IAFjD,EAGKiF,IAHL,CAGU,OAHV,EAGmB/E,QAAQN,OAAOE,IAAf,GAAsBF,OAAOG,KAHhD,CAAd;;AAMA,MAAI2F,OAAOd,IAAIY,MAAJ,CAAW,GAAX,EACIP,IADJ,CACS,OADT,EACkB,OADlB,EAEIA,IAFJ,CAES,WAFT,EAEsB,eAAcrF,OAAOE,IAArB,GAA4B,GAA5B,GAAkCF,OAAOC,GAAzC,GAA8C,GAFpE,CAAX;AAGA;AACA;AACA;AACA;;AAEA,MAAI8F,WAAWD,KAAKF,MAAL,CAAY,MAAZ,EACAP,IADA,CACK,OADL,EACc,YADd,EAEAA,IAFA,CAEK,QAFL,EAEe,IAFf,EAGAA,IAHA,CAGK,OAHL,EAGc/E,QAAQN,OAAOE,IAAf,GAAsBF,OAAOG,KAH3C,EAIAkF,IAJA,CAIK,WAJL,EAIkB,eAAcrF,OAAOE,IAArB,GAA4B,GAA5B,GAAkC,CAAC,GAAnC,GAAwC,GAJ1D,CAAf;;AAMA,MAAI0E,aAAapE,GAAGwF,eAAH,GACFC,SADE,CACQ,CAAE3F,QAAQ,CAAV,EAAaD,SAAS,CAAtB,CADR,EAEF0E,MAFE,CAEK,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,CAFL,EAGFmB,KAHE,CAGI,GAHJ,CAAjB;;AAKA,MAAIC,WAAWnB,IAAIY,MAAJ,CAAW,MAAX,EACAQ,IADA,CACK,CAACxB,UAAD,CADL,EAEAS,IAFA,CAEK,OAFL,EAEc,WAFd,EAGAA,IAHA,CAGK,QAHL,EAGehF,SAASL,OAAOC,GAAhB,GAAsBD,OAAOI,IAH5C,EAIAiF,IAJA,CAIK,OAJL,EAIc/E,QAAQN,OAAOE,IAAf,GAAsBF,OAAOG,KAJ3C,EAKAkG,KALA,CAKM,MALN,EAKc,MALd,EAMAA,KANA,CAMM,gBANN,EAMwB,KANxB,EAOAC,IAPA,CAOK/B,IAPL,EAQA+B,IARA,CAQK/F,IARL,CAAf;AASc;AACE;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGd,WAASI,MAAT,GAAkB;AAChBmF,SAAKT,IAAL,CAAU,WAAV,EAAuB7E,GAAG+F,KAAH,CAASC,SAAhC;AACD;;AAEDhG,KAAGiG,KAAH,GACGC,KADH,CACSlG,GAAGmG,IADZ,EACkB,oBADlB,EAEGD,KAFH,CAESlG,GAAGmG,IAFZ,EAEkB,mBAFlB,EAGGD,KAHH,CAGSlG,GAAGoG,GAHZ,EAGiB,aAHjB,EAIGC,KAJH,CAISC,KAJT;;AAUA,MAAIxB,OAAO9E,GAAGuG,OAAH,GACRnC,UADQ,CACGA,UADH,CAAX;;AAGA,MAAIoC,WAAW,GAAf;;AAGA,WAASF,KAAT,CAAeG,KAAf,EAAsBC,aAAtB,EAAqCC,YAArC,EAAmDC,UAAnD,EAA+D;AAC7D;AACA,QAAIC,kBAAkBC,SAASC,OAAT,CAAiBL,aAAjB,EAAgCA,cAAcM,OAAd,CAAsBC,SAAtD,EAAiEC,QAAvF;;AAEA5B,SAAKL,SAAL,CAAe,UAAf,EACGW,IADH,CACQiB,eADR,EAEGM,KAFH,GAGG/B,MAHH,CAGU,MAHV,EAIGP,IAJH,CAIQ,OAJR,EAIiB,SAJjB,EAKGA,IALH,CAKQ,GALR,EAKaC,IALb,EAMG5E,EANH,CAMM,WANN,EAMmB,UAASmD,CAAT,EAAW;AAC1BrD,SAAGmF,MAAH,CAAU,IAAV,EACCN,IADD,CACM,OADN,EACe,eADf,EAECA,IAFD,CAEM,MAFN,EAEc,OAFd;;AAIA7E,SAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,MADR,EAECP,IAFD,CAEM,OAFN,EAEe,gBAFf,EAGCuC,IAHD,CAIE,cAAc/D,EAAEgE,UAAF,CAAaC,IAJ7B;AAMAtH,SAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,MADR,EAECP,IAFD,CAEM,OAFN,EAEe,gBAFf,EAGCuC,IAHD,CAIE,gBAAgB/D,EAAEgE,UAAF,CAAaE,SAJ/B;AAMAvH,SAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,MADR,EAECP,IAFD,CAEM,OAFN,EAEe,gBAFf,EAGCuC,IAHD,CAIE,wBAAwB/D,EAAEgE,UAAF,CAAaG,UAJvC;AAMD,KA7BH,EA8BGtH,EA9BH,CA8BM,UA9BN,EA8BkB,UAASmD,CAAT,EAAW;AACzBrD,SAAGiF,SAAH,CAAa,qBAAb,EAAoCC,MAApC;AACAlF,SAAGiF,SAAH,CAAa,gBAAb,EACCJ,IADD,CACM,OADN,EACe,SADf;AAED,KAlCH;;AAuCA,QAAI4C,WAAWX,SAASC,OAAT,CAAiBJ,YAAjB,EAA+BA,aAAaK,OAAb,CAAqBS,QAApD,EAA8DP,QAA7E;;AAGA,QAAIQ,oBAAoB,EAAxB;;AAEA,SAAK,IAAI9G,IAAI,CAAb,EAAgBA,IAAI6G,SAAS3G,MAA7B,EAAqCF,GAArC,EAA0C;AACxC,UAAI+G,OAAOF,SAAS7G,CAAT,EAAYyG,UAAZ,CAAuBO,SAAlC;AACA,UAAI5G,QAAQyG,SAAS7G,CAAT,EAAYiH,QAAZ,CAAqBjD,WAAjC;AACA8C,wBAAkBC,IAAlB,IAA0B,EAAC3G,OAAOA,KAAR,EAA1B;AACD;;AAED,QAAI8G,UAAU,EAAd;AACA,SAAK,IAAIlH,IAAI,CAAb,EAAgBA,IAAIgG,WAAW9F,MAA/B,EAAuCF,GAAvC,EAA4C;AAC1C,UAAImH,SAASnB,WAAWhG,CAAX,EAAc,QAAd,CAAb;AACA,UAAIoH,UAAUpB,WAAWhG,CAAX,EAAc,MAAd,CAAd;AACA,UAAIqH,UAAUrB,WAAWhG,CAAX,EAAc,UAAd,CAAd;AACA,UAAI8G,kBAAkBK,MAAlB,KAA6BL,kBAAkBM,OAAlB,CAA7B,IAA2DC,OAA/D,EAAwE;AACtErB,mBAAWhG,CAAX,EAAc,MAAd,IAAwB,OAAxB;AACAgG,mBAAWhG,CAAX,EAAc,aAAd,IAA+B8G,kBAAkBK,MAAlB,EAA0B,OAA1B,CAA/B;AACAnB,mBAAWhG,CAAX,EAAc,WAAd,IAA6B8G,kBAAkBM,OAAlB,EAA2B,OAA3B,CAA7B;AACAF,gBAAQI,IAAR,CAAatB,WAAWhG,CAAX,CAAb;AACD;AACF;;AAED,aAASuH,UAAT,CAAoBC,KAApB,EAA2BC,KAA3B,EAAkC;AAChC,UAAIC,IAAID,MAAME,IAAN,GAAaC,cAAb,EAAR;AACAJ,YAAMvD,IAAN,CAAW,SAAX,EAAsB,CAAtB,EACOsD,UADP,GAEOM,QAFP,CAEgB,KAAGJ,MAAME,IAAN,GAAaC,cAAb,EAFnB,EAGOE,SAHP,CAGiB,WAHjB,EAG8BC,cAAcN,MAAME,IAAN,EAAd,CAH9B,EAIO1D,IAJP,CAIY,GAJZ,EAIiBC,IAJjB,EAKOI,MALP;AAOD;;AAED,aAASyD,aAAT,CAAuB7D,IAAvB,EAA6B;AAC3B,UAAIwD,IAAIxD,KAAK0D,cAAL,EAAR;AACA,aAAO,UAASnF,CAAT,EAAYzC,CAAZ,EAAesC,CAAf,EAAkB;AACvB,eAAO,UAASQ,CAAT,EAAY;AACjB,cAAIkF,IAAI9D,KAAK+D,gBAAL,CAAsBnF,IAAI4E,CAA1B,CAAR;AACA,cAAIQ,KAAKhE,KAAK+D,gBAAL,CAAsB,CAAtB,CAAT;AACA,iBAAO,gBAAgBD,EAAEzH,CAAF,GAAI2H,GAAG3H,CAAvB,IAA4B,GAA5B,IAAmCyH,EAAEvH,CAAF,GAAIyH,GAAGzH,CAA1C,IAA+C,GAAtD;AACD,SAJD;AAKD,OAND;AAOD;;AAED,QAAI0H,QAAQ,CAAZ;;AAEA,QAAMC,WAAW,SAAXA,QAAW,GAAU;AACzB;AACA1D,WAAKL,SAAL,CAAe,QAAf,EAAyBC,MAAzB;AACA,UAAI+D,UAAUF,QAAM,GAApB;AACA,UAAIG,QAAQ,CAACH,QAAME,OAAP,IAAgB,GAA5B;AACA,UAAIC,QAAQ,EAAR,IAAcD,UAAU,EAA5B,EAAgC;AAC9B3D,aAAKF,MAAL,CAAY,MAAZ,EACCP,IADD,CACM,OADN,EACe,OADf,EAECuC,IAFD,CAEM,oBAAmB8B,KAAnB,GAA2B,IAA3B,GAAkCD,OAFxC;AAID,OALD,MAKM,IAAIC,QAAQ,EAAZ,EAAgB;AACpB5D,aAAKF,MAAL,CAAY,MAAZ,EACCP,IADD,CACM,OADN,EACe,OADf,EAECuC,IAFD,CAEM,oBAAmB8B,KAAnB,GAA2B,GAA3B,GAAiCD,OAFvC;AAGD,OAJK,MAIC,IAAIA,UAAU,EAAd,EAAkB;AACvB3D,aAAKF,MAAL,CAAY,MAAZ,EACCP,IADD,CACM,OADN,EACe,OADf,EAECuC,IAFD,CAEM,mBAAkB8B,KAAlB,GAA0B,IAA1B,GAAiCD,OAFvC;AAGD,OAJM,MAIA;AACL3D,aAAKF,MAAL,CAAY,MAAZ,EACCP,IADD,CACM,OADN,EACe,OADf,EAECuC,IAFD,CAEM,mBAAkB8B,KAAlB,GAA0B,GAA1B,GAAgCD,OAFtC;AAGD;AACD3D,WAAKL,SAAL,CAAe,QAAf,EACCJ,IADD,CACM,QADN,EACgB,CADhB,EAECA,IAFD,CAEM,OAFN,EAEe,EAFf;;AAIA,WAAK,IAAIjE,IAAI,CAAb,EAAgBA,IAAIkH,QAAQhH,MAAR,GAAe,CAAnC,EAAsCF,GAAtC,EAA2C;AACzC;AACA,YAAIuI,aAAaC,OAAOC,MAAP,CAAc,EAAd,EAAkBvB,QAAQlH,CAAR,CAAlB,CAAjB;AACA;AACA,YAAI0I,SAASxB,QAAQlH,CAAR,EAAW2I,QAApB,MAAkCR,KAAtC,EAA6C;AAC3CZ,qBACE7C,KAAKZ,KAAL,CAAWyE,UAAX,EACK/D,MADL,CACY,MADZ,EAEKP,IAFL,CAEU,OAFV,EAEmB,OAFnB,EAGKA,IAHL,CAGU,MAHV,EAGkB,KAHlB,EAIKA,IAJL,CAIU,GAJV,EAIeC,IAJf,EAKKD,IALL,CAKU,cALV,EAK0B,GAL1B,CADF,EAQES,KAAKZ,KAAL,CAAW,EAACC,MAAM,YAAP,EAAqBC,aAAa,CAACkD,QAAQlH,CAAR,EAAWgE,WAAZ,EAAyBkD,QAAQlH,CAAR,EAAW4I,SAApC,CAAlC,EAAX,EACKpE,MADL,CACY,MADZ,EAEKP,IAFL,CAEU,OAFV,EAEmB,OAFnB,EAGKA,IAHL,CAGU,GAHV,EAGeC,IAHf,EAIKD,IAJL,CAIU,SAJV,EAIqB,GAJrB,EAKKA,IALL,CAKU,MALV,EAKkB,MALlB,EAMKA,IANL,CAMU,cANV,EAM0B,IAN1B,EAOKA,IAPL,CAOU,QAPV,EAOoB,UAPpB,EAQKsD,UARL,GASKM,QATL,CASc,IATd,EAUKvD,MAVL,EARF;AAmBD;AAEF;AACD6D,eAAS,CAAT;AACA,UAAIA,QAAM,GAAN,IAAa,EAAjB,EAAqB;AACnBA,iBAAS,MAAMA,QAAM,GAArB;AACD;AACD,UAAIA,SAAS,IAAb,EAAmB;AACjBA,gBAAQ,CAAR;AACD;AACF,KA7DD;;AAgEA,QAAIU,OAAOC,YACTV,QADS,EACCxC,QADD,CAAX;;AAGAlB,SAAKL,SAAL,CAAe,UAAf,EACCW,IADD,CACM6B,QADN,EAECN,KAFD,GAGC/B,MAHD,CAGQ,MAHR,EAICP,IAJD,CAIM,OAJN,EAIe,SAJf,EAKCA,IALD,CAKM,GALN,EAKWC,KAAK6E,WAAL,CAAiB,GAAjB,CALX;AAMA;AANA,KAOCzJ,EAPD,CAOI,WAPJ,EAOiB,UAASmD,CAAT,EAAW;AAC1B;AACArD,SAAGmF,MAAH,CAAU,IAAV,EACCN,IADD,CACM,OADN,EACe,eADf,EAECA,IAFD,CAEM,QAFN,EAEgB,MAFhB,EAGCA,IAHD,CAGM,cAHN,EAGsB,GAHtB,EAICA,IAJD,CAIM,MAJN,EAIc,KAJd,EAKCA,IALD,CAKM,GALN,EAKWC,KAAK6E,WAAL,CAAiB,CAAjB,CALX;;AAOA3J,SAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,MADR,EAECP,IAFD,CAEM,OAFN,EAEe,gBAFf,EAGCuC,IAHD,CAIE,cAAc/D,EAAEgE,UAAF,CAAauC,IAJ7B;AAMA5J,SAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,MADR,EAECP,IAFD,CAEM,OAFN,EAEe,gBAFf,EAGCuC,IAHD,CAIE,WAAW/D,EAAEgE,UAAF,CAAaO,SAJ1B;AAMA;AACD,KA7BD;AA8BA;AA9BA,KA+BC1H,EA/BD,CA+BI,UA/BJ,EA+BgB,UAASmD,CAAT,EAAW;AACzBrD,SAAGiF,SAAH,CAAa,qBAAb,EAAoCC,MAApC;;AAEAlF,SAAGiF,SAAH,CAAa,gBAAb,EACCJ,IADD,CACM,OADN,EACe,SADf,EAECA,IAFD,CAEM,GAFN,EAEWC,KAAK6E,WAAL,CAAiB,GAAjB,CAFX;AAID,KAtCD;;AAyCA3J,OAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,OADR,EAECP,IAFD,CAEM,MAFN,EAEa,QAFb,EAGCA,IAHD,CAGM,OAHN,EAGc,OAHd,EAICA,IAJD,CAIM,OAJN,EAIc,OAJd,EAKC3E,EALD,CAKI,OALJ,EAKa,YAAU;AACnB2J,oBAAcJ,IAAd;AACH,KAPD;;AASAzJ,OAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,OADR,EAECP,IAFD,CAEM,MAFN,EAEa,QAFb,EAGCA,IAHD,CAGM,OAHN,EAGc,MAHd,EAICA,IAJD,CAIM,OAJN,EAIc,MAJd,EAKC3E,EALD,CAKI,OALJ,EAKa,YAAU;AACrB2J,oBAAcJ,IAAd;AACAA,aAAOC,YAAYV,QAAZ,EAAsBxC,QAAtB,CAAP;AACD,KARD;;AAUA,QAAIsD,QAAQ9J,GAAGmF,MAAH,CAAU,MAAV,EACXC,MADW,CACJ,MADI,EAEXP,IAFW,CAEN,OAFM,EAEG,OAFH,EAGXuC,IAHW,CAIV,qBAAsBZ,WAAS,IAAV,GAAgB,EAArC,GAA0C,UAJhC,CAAZ;;AAOAxG,OAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,OADR,EAECP,IAFD,CAEM,MAFN,EAEa,QAFb,EAGCA,IAHD,CAGM,OAHN,EAGc,MAHd,EAICA,IAJD,CAIM,OAJN,EAIc,IAJd,EAKC3E,EALD,CAKI,OALJ,EAKa,YAAU;AACrBsG,iBAAWA,WAAS,CAApB;AACAxG,SAAGmF,MAAH,CAAU,QAAV,EAAoBiC,IAApB,CACE,qBAAsBZ,WAAS,IAAV,GAAgB,EAArC,GAA0C,UAD5C;AAGAqD,oBAAcJ,IAAd;AACAA,aAAOC,YAAYV,QAAZ,EAAsBxC,QAAtB,CAAP;AACD,KAZD;;AAcAxG,OAAGmF,MAAH,CAAU,MAAV,EACCC,MADD,CACQ,OADR,EAECP,IAFD,CAEM,MAFN,EAEa,QAFb,EAGCA,IAHD,CAGM,OAHN,EAGc,MAHd,EAICA,IAJD,CAIM,OAJN,EAIc,IAJd,EAKC3E,EALD,CAKI,OALJ,EAKa,YAAU;AACrBsG,iBAAWA,WAAS,CAApB;AACAxG,SAAGmF,MAAH,CAAU,QAAV,EAAoBiC,IAApB,CACE,qBAAsBZ,WAAS,IAAV,GAAgB,EAArC,GAA0C,UAD5C;AAGAqD,oBAAcJ,IAAd;AACAA,aAAOC,YAAYV,QAAZ,EAAsBxC,QAAtB,CAAP;AACD,KAZD;AAcD;AACJ,CApgBD,I","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9672915adaa4f98bbc15","\n\n(function(){\n\n\n  var margin = { top: 0, left: 0, right: 0, down: 0},\n    height = 750 - margin.top - margin.down,\n    width = 2000 - margin.left - margin.right;\n\n  var zoom = d3.zoom()\n    .scaleExtent([1, 8])\n    .on(\"zoom\", zoomed);\n//\n/***** ALL MATH FUNCTIONS ****/\n\nvar toRad = Math.PI / 180;\nvar toDeg = 180 / Math.PI;\n\n\n// Helper function: cross product of two vectors v0&v1\nfunction cross(v0, v1) {\n    return [v0[1] * v1[2] - v0[2] * v1[1], v0[2] * v1[0] - v0[0] * v1[2], v0[0] * v1[1] - v0[1] * v1[0]];\n}\n\n//Helper function: dot product of two vectors v0&v1\nfunction dot(v0, v1) {\n    for (var i = 0, sum = 0; v0.length > i; ++i) sum += v0[i] * v1[i];\n    return sum;\n}\n\n// Helper function:\n// This function converts a [lon, lat] coordinates into a [x,y,z] coordinate\n// the [x, y, z] is Cartesian, with origin at lon/lat (0,0) center of the earth\nfunction lonlat2xyz( coord ){\n\n\tvar lon = coord[0] * toRad;\n\tvar lat = coord[1] * toRad;\n\n\tvar x = Math.cos(lat) * Math.cos(lon);\n\n\tvar y = Math.cos(lat) * Math.sin(lon);\n\n\tvar z = Math.sin(lat);\n\n\treturn [x, y, z];\n}\n\n// Helper function:\n// This function computes a quaternion representation for the rotation between to vectors\n// https://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Euler_angles_.E2.86.94_Quaternion\nfunction quaternion(v0, v1) {\n\n\tif (v0 && v1) {\n\n\t    var w = cross(v0, v1),  // vector pendicular to v0 & v1\n\t        w_len = Math.sqrt(dot(w, w)); // length of w\n\n        if (w_len == 0)\n        \treturn;\n\n        var theta = .5 * Math.acos(Math.max(-1, Math.min(1, dot(v0, v1))));\n\n\t       let qi  = w[2] * Math.sin(theta) / w_len;\n\t      let  qj  = - w[1] * Math.sin(theta) / w_len;\n\t       let qk  = w[0]* Math.sin(theta) / w_len;\n\t      let  qr  = Math.cos(theta);\n\n\t    return theta && [qr, qi, qj, qk];\n\t}\n}\n\n// Helper function:\n// This functions converts euler angles to quaternion\n// https://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Euler_angles_.E2.86.94_Quaternion\nfunction euler2quat(e) {\n\n\tif(!e) return;\n\n    var roll = .5 * e[0] * toRad,\n        pitch = .5 * e[1] * toRad,\n        yaw = .5 * e[2] * toRad,\n\n        sr = Math.sin(roll),\n        cr = Math.cos(roll),\n        sp = Math.sin(pitch),\n        cp = Math.cos(pitch),\n        sy = Math.sin(yaw),\n        cy = Math.cos(yaw),\n\n        qi = sr*cp*cy - cr*sp*sy,\n        qj = cr*sp*cy + sr*cp*sy,\n        qk = cr*cp*sy - sr*sp*cy,\n        qr = cr*cp*cy + sr*sp*sy;\n\n    return [qr, qi, qj, qk];\n}\n\n// This functions computes a quaternion multiply\n// Geometrically, it means combining two quant rotations\n// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/arithmetic/index.htm\nfunction quatMultiply(q1, q2) {\n\tif(!q1 || !q2) return;\n\n    var a = q1[0],\n        b = q1[1],\n        c = q1[2],\n        d = q1[3],\n        e = q2[0],\n        f = q2[1],\n        g = q2[2],\n        h = q2[3];\n\n    return [\n     a*e - b*f - c*g - d*h,\n     b*e + a*f + c*h - d*g,\n     a*g - b*h + c*e + d*f,\n     a*h + b*g - c*f + d*e];\n\n}\n\n// This function computes quaternion to euler angles\n// https://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Euler_angles_.E2.86.94_Quaternion\nfunction quat2euler(t){\n\n\tif(!t) return;\n\n\treturn [ Math.atan2(2 * (t[0] * t[1] + t[2] * t[3]), 1 - 2 * (t[1] * t[1] + t[2] * t[2])) * toDeg,\n\t\t\t Math.asin(Math.max(-1, Math.min(1, 2 * (t[0] * t[2] - t[3] * t[1])))) * toDeg,\n\t\t\t Math.atan2(2 * (t[0] * t[3] + t[1] * t[2]), 1 - 2 * (t[2] * t[2] + t[3] * t[3])) * toDeg\n\t\t\t]\n}\n\n/*  This function computes the euler angles when given two vectors, and a rotation\n\tThis is really the only math function called with d3 code.\n\n\tv0 - starting pos in lon/lat, commonly obtained by projection.invert\n\tv1 - ending pos in lon/lat, commonly obtained by projection.invert\n\to0 - the projection rotation in euler angles at starting pos (v0), commonly obtained by projection.rotate\n*/\n\nfunction eulerAngles(v0, v1, o0) {\n\n\t/*\n\t\tThe math behind this:\n\t\t- first calculate the quaternion rotation between the two vectors, v0 & v1\n\t\t- then multiply this rotation onto the original rotation at v0\n\t\t- finally convert the resulted quat angle back to euler angles for d3 to rotate\n\t*/\n\n\tvar t = quatMultiply( euler2quat(o0), quaternion(lonlat2xyz(v0), lonlat2xyz(v1) ) );\n\treturn quat2euler(t);\n}\n\n\n/**************end of math functions**********************/\n  var drag = d3.drag()\n                .on(\"start\", dragstart)\n                .on(\"drag\", dragged)\n                .on(\"end\", dragend)\n\n  var gpos0, o0;\n\n  function dragstart(){\n  \tgpos0 = projection.invert(d3.mouse(this));\n  \to0 = projection.rotate();\n\n    debugger\n  \tsvg.insert(\"path\")\n               .datum({type: \"Point\", coordinates: gpos0})\n               .attr(\"class\", \"point\")\n               .attr(\"d\", path);\n  }\n\n  function dragged(){\n\n  \tvar gpos1 = projection.invert(d3.mouse(this));\n\n  \to0 = projection.rotate();\n\n  \tvar o1 = eulerAngles(gpos0, gpos1, o0);\n  \tprojection.rotate(o1);\n\n  \tsvg.selectAll(\".point\")\n  \t \t\t.datum({type: \"Point\", coordinates: gpos1});\n    svg.selectAll(\"path\").attr(\"d\", path);\n\n  }\n\n  function dragend(){\n  \tsvg.selectAll(\".point\").remove();\n  }\n//\n\n\n  let svg = d3.select(\"#map\")\n              .append(\"svg\")\n              .attr(\"height\", height + margin.top + margin.down)\n              .attr(\"width\", width + margin.left + margin.right)\n\n\n  let rectSVG = svg.append(\"pattern\")\n                    .attr(\"class\", \"rect-svg\")\n                    .attr(\"height\", height + margin.top + margin.down)\n                    .attr(\"width\", width + margin.left + margin.right)\n\n\n  let gMap = svg.append(\"g\")\n                .attr(\"class\", \"g-map\")\n                .attr(\"transform\", \"translate(\"+ margin.left + \",\" + margin.top +\")\")\n  //\n  // function startDrag(d){\n  //   d3.select(this).\n  // }\n\n  let rectGMap = gMap.append(\"rect\")\n                .attr(\"class\", \"rect-g-map\")\n                .attr(\"height\", 1250)\n                .attr(\"width\", width + margin.left + margin.right)\n                .attr(\"transform\", \"translate(\"+ margin.left + \",\" + -400 +\")\")\n\n  let projection = d3.geoOrthographic()\n                .translate([ width / 2, height / 2 ])\n                .rotate([100, 350, 7])\n                .scale(250);\n\n  let rectZoom = svg.append(\"rect\")\n                .data([projection])\n                .attr(\"class\", \"rect-zoom\")\n                .attr(\"height\", height + margin.top + margin.down)\n                .attr(\"width\", width + margin.left + margin.right)\n                .style(\"fill\", \"none\")\n                .style(\"pointer-events\", \"all\")\n                .call(drag)\n                .call(zoom)\n                // .call(zoom)\n                  // .on(\"mousedown.zoom\", function(d){\n                  //   // debugger\n                  //   // d.rotate([50, 0, 0])\n                  // })\n                  // .on(\"touchstart.zoom\", null)\n                  // .on(\"touchmove.zoom\", null)\n                  // .on(\"touchend.zoom\", null);\n\n\n    function zoomed() {\n      gMap.attr(\"transform\", d3.event.transform );\n    }\n\n    d3.queue()\n      .defer(d3.json, \"countries.topojson\")\n      .defer(d3.json, \"airports.topojson\")\n      .defer(d3.csv, \"flights.csv\")\n      .await(ready);\n\n\n\n\n\n    var path = d3.geoPath()\n      .projection(projection);\n\n    let intSpeed = 100\n\n\n    function ready(error, countriesData, airportsData, flightData) {\n      // console.log(flightData)\n      var countriesParsed = topojson.feature(countriesData, countriesData.objects.countries).features;\n\n      gMap.selectAll(\".country\")\n        .data(countriesParsed)\n        .enter()\n        .append(\"path\")\n        .attr(\"class\", \"country\")\n        .attr(\"d\", path)\n        .on(\"mouseover\", function(d){\n          d3.select(this)\n          .attr(\"class\", \"activeCountry\")\n          .attr(\"fill\", \"black\");\n\n          d3.select(\".map\")\n          .append(\"text\")\n          .attr(\"class\", \"countrydetails\")\n          .text(\n            \"Country: \" + d.properties.NAME\n          )\n          d3.select(\".map\")\n          .append(\"text\")\n          .attr(\"class\", \"countrydetails\")\n          .text(\n            \"Continent: \" + d.properties.CONTINENT\n          )\n          d3.select(\".map\")\n          .append(\"text\")\n          .attr(\"class\", \"countrydetails\")\n          .text(\n            \"GDP (in millions): \" + d.properties.GDP_MD_EST\n          )\n        })\n        .on(\"mouseout\", function(d){\n          d3.selectAll(\"text.countrydetails\").remove()\n          d3.selectAll(\".activeCountry\")\n          .attr(\"class\", \"country\")\n        });\n\n\n\n\n      let airports = topojson.feature(airportsData, airportsData.objects.airports).features;\n\n\n      let airportsNameCoord = {};\n\n      for (var i = 0; i < airports.length; i++) {\n        let iata = airports[i].properties.iata_code;\n        let coord = airports[i].geometry.coordinates\n        airportsNameCoord[iata] = {coord: coord}\n      }\n\n      let flights = [];\n      for (var i = 0; i < flightData.length; i++) {\n        let orgAir = flightData[i][\"ORIGIN\"];\n        let destAir = flightData[i][\"DEST\"];\n        let depTime = flightData[i][\"DEP_TIME\"]\n        if (airportsNameCoord[orgAir] && airportsNameCoord[destAir] && depTime) {\n          flightData[i][\"type\"] = \"Point\";\n          flightData[i][\"coordinates\"] = airportsNameCoord[orgAir][\"coord\"];\n          flightData[i][\"DESTCOORD\"] = airportsNameCoord[destAir][\"coord\"];\n          flights.push(flightData[i])\n        }\n      }\n\n      function transition(plane, route) {\n        let l = route.node().getTotalLength();\n        plane.attr('opacity', 1)\n              .transition()\n              .duration(10*route.node().getTotalLength())\n              .attrTween(\"transform\", translateAttr(route.node()))\n              .attr(\"d\", path)\n              .remove()\n        ;\n      }\n\n      function translateAttr(path) {\n        var l = path.getTotalLength();\n        return function(d, i, a) {\n          return function(t) {\n            var p = path.getPointAtLength(t * l);\n            var po = path.getPointAtLength(0);\n            return \"translate(\" + (p.x-po.x) + \",\" + (p.y-po.y) + \")\";\n          };\n        };\n      }\n\n      let timer = 0;\n\n      const interval = function(){\n        //\n        gMap.selectAll(\".clock\").remove();\n        let minutes = timer%100;\n        let hours = (timer-minutes)/100;\n        if (hours < 10 && minutes < 10) {\n          gMap.append(\"text\")\n          .attr(\"class\", \"clock\")\n          .text(\"Time (hh/mm): 0\" +hours + \":0\" + minutes );\n\n        }else if (hours < 10) {\n          gMap.append(\"text\")\n          .attr(\"class\", \"clock\")\n          .text(\"Time (hh/mm): 0\" +hours + \":\" + minutes )\n        } else if (minutes < 10) {\n          gMap.append(\"text\")\n          .attr(\"class\", \"clock\")\n          .text(\"Time (hh/mm): \" +hours + \":0\" + minutes )\n        } else {\n          gMap.append(\"text\")\n          .attr(\"class\", \"clock\")\n          .text(\"Time (hh/mm): \" +hours + \":\" + minutes )\n        }\n        gMap.selectAll(\".clock\")\n        .attr(\"height\", 0)\n        .attr(\"width\", 10)\n\n        for (var i = 0; i < flights.length-1; i++) {\n          // let currFlight = {coordinates: flights[i][\"coordinates\"]}\n          let currFlight = Object.assign({}, flights[i])\n          // delete currFlight[\"DESTCOORD\"]\n          if (parseInt(flights[i].DEP_TIME) === timer) {\n            transition(\n              gMap.datum(currFlight)\n                  .append(\"path\")\n                  .attr(\"class\", \"plane\")\n                  .attr(\"fill\", \"red\")\n                  .attr(\"d\", path)\n                  .attr(\"stroke-width\", 0.5)\n              ,\n              gMap.datum({type: \"LineString\", coordinates: [flights[i].coordinates, flights[i].DESTCOORD]})\n                  .append(\"path\")\n                  .attr(\"class\", \"route\")\n                  .attr(\"d\", path)\n                  .attr('opacity', 0.5)\n                  .attr('fill', \"none\")\n                  .attr('stroke-width', 0.01)\n                  .attr('stroke', '\t#00FF00')\n                  .transition()\n                  .duration(1000)\n                  .remove());\n          }\n\n        }\n        timer += 1\n        if (timer%100 >= 60) {\n          timer += 100 - timer%100\n        }\n        if (timer >= 2400) {\n          timer = 0;\n        }\n      }\n\n\n      let time = setInterval(\n        interval, intSpeed)\n\n      gMap.selectAll(\".airport\")\n      .data(airports)\n      .enter()\n      .append(\"path\")\n      .attr(\"class\", \"airport\")\n      .attr(\"d\", path.pointRadius(1.5))\n      // .attr(\"scale\", 100)\n      .on(\"mouseover\", function(d){\n        //\n        d3.select(this)\n        .attr(\"class\", \"activeAirport\")\n        .attr(\"stroke\", \"blue\")\n        .attr(\"stroke-width\", 0.5)\n        .attr(\"fill\", \"red\")\n        .attr(\"d\", path.pointRadius(5));\n\n        d3.select(\".map\")\n        .append(\"text\")\n        .attr(\"class\", \"countrydetails\")\n        .text(\n          \"Airport: \" + d.properties.name\n        )\n        d3.select(\".map\")\n        .append(\"text\")\n        .attr(\"class\", \"countrydetails\")\n        .text(\n          \"IATA: \" + d.properties.iata_code\n        )\n        //\n      })\n      // .on(\"click\", )\n      .on(\"mouseout\", function(d){\n        d3.selectAll(\"text.countrydetails\").remove()\n\n        d3.selectAll(\".activeAirport\")\n        .attr(\"class\", \"airport\")\n        .attr(\"d\", path.pointRadius(1.5));\n\n      });\n\n\n      d3.select(\".map\")\n      .append(\"input\")\n      .attr(\"type\",\"button\")\n      .attr(\"class\",\"pause\")\n      .attr(\"value\",\"Pause\")\n      .on(\"click\", function(){\n          clearInterval(time)\n      });\n\n      d3.select(\".map\")\n      .append(\"input\")\n      .attr(\"type\",\"button\")\n      .attr(\"class\",\"play\")\n      .attr(\"value\",\"Play\")\n      .on(\"click\", function(){\n        clearInterval(time)\n        time = setInterval(interval, intSpeed)\n      });\n\n      let speed = d3.select(\".map\")\n      .append(\"text\")\n      .attr(\"class\", \"speed\")\n      .text(\n        \"Speed: 1 hour = \" + (intSpeed/1000)*60 + \" seconds\"\n      )\n\n      d3.select(\".map\")\n      .append(\"input\")\n      .attr(\"type\",\"button\")\n      .attr(\"class\",\"play\")\n      .attr(\"value\",\"X2\")\n      .on(\"click\", function(){\n        intSpeed = intSpeed/2\n        d3.select(\".speed\").text(\n          \"Speed: 1 hour = \" + (intSpeed/1000)*60 + \" seconds\"\n        )\n        clearInterval(time)\n        time = setInterval(interval, intSpeed)\n      });\n\n      d3.select(\".map\")\n      .append(\"input\")\n      .attr(\"type\",\"button\")\n      .attr(\"class\",\"play\")\n      .attr(\"value\",\"/2\")\n      .on(\"click\", function(){\n        intSpeed = intSpeed*2\n        d3.select(\".speed\").text(\n          \"Speed: 1 hour = \" + (intSpeed/1000)*60 + \" seconds\"\n        )\n        clearInterval(time)\n        time = setInterval(interval, intSpeed)\n      });\n\n    }\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./lib/map_visualization.js"],"sourceRoot":""}